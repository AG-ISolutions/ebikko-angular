<md-chips 
    ng-model="esc.model" 
    md-autocomplete-snap 
    md-transform-chip="esc.transformChip($chip)"
    md-require-match="false">
    
    <md-autocomplete 
        md-no-cache="false" 
        md-selected-item="esc.selectedPrincipal" 
        md-search-text="esc.emailSearchText" 
        md-search-text-change="esc.performPrincipalSearch(esc.emailSearchText)" 
        md-items="principal in esc.principals" 
        md-item-text="principal.name" 
        placeholder="Enter name or email">
        
        <md-item-template>
            <span md-highlight-text="esc.emailSearchText" md-highlight-flags="^i">{{principal.name}}  ({{principal.email}})</span>
        </md-item-template>
        <md-not-found>
            {{'No principals found' | translate}}
        </md-not-found>
    </md-autocomplete>
    <md-chip-template>
        <span>
          {{$chip.name}}
        </span>
    </md-chip-template>
</md-chips>