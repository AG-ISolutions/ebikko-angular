<div layout="row" ng-cloak class="menu-bar">
    <md-sidenav class="site-sidenav md-sidenav-left md-whiteframe-z2" md-component-id="left" md-is-locked-open="false">
        <md-toolbar class="md-whiteframe-z1">
        </md-toolbar>
        <md-list>
            <md-list-item ng-repeat="mi in menu.menuItems">
                <md-button ng-class="{'md-primary': menu.getSelectedTab() === mi}" ng-click="menu.selectMenuItem(mi)">{{mi.name}}</md-button>
            </md-list-item>
        </md-list>
    </md-sidenav>
    <div flex layout="column" tabIndex="-1" role="main" class="md-whiteframe-z2">
        <md-toolbar layout="row" class="md-whiteframe-z1">
            <md-button class="menu" ng-click="menu.toggleSidebar()" aria-label="Show Menu" flex="2">
                <md-icon md-svg-icon="menu"></md-icon>
            </md-button>
            <h1 flex="92" layout="row" layout-align="center">Tricor Meeting Management System</h1>
            <div layout="row" layout-align="end center" flex="10" class="quickSearch">
                <input type="text" ng-model="menu.searchQuery" ng-keypress="($event.which === 13) ? menu.quickSearch() : 0" aria-label="Search" onblur="this.value=''">
            </div>
            <div layout="row" layout-align="center center" flex="2" class="menuButtons">
                <md-button class="md-icon-button" aria-label="Fullscreen">
                    <md-icon md-svg-icon="fullscreen" ng-click="menu.toggleFullscreen()"></md-icon>
                </md-button>
                <md-menu>
                    <md-button class="md-icon-button" ng-click="menu.openSettings($mdOpenMenu, $event)" aria-label="Show Settings">
                        <md-icon md-svg-icon="settings"></md-icon>
                    </md-button>
                    <md-menu-content width="4">
                        <md-menu-item>
                            <md-button ng-click="menu.showChangePassword($event)">Change Password</md-button>
                        </md-menu-item>
                        <md-menu-item>
                            <md-button ng-click="menu.logout()">Logout</md-button>
                        </md-menu-item>
                    </md-menu-content>
                </md-menu>
            </div>
            <div flex="2"></div>
        </md-toolbar>
        <md-tabs flex="grow" md-border-bottom md-autoselect ng-hide="menu.tabs.length === 0">
            <md-tab ng-repeat="tab in menu.tabs" md-active="menu.getSelectedTab() === tab" md-on-select="menu.selectTab(tab)" ng-class="tabTest">
                <md-tab-label>
                    <span class="tab-label-{{tab.type}}">
                        {{tab.name}}
                        <md-icon md-svg-icon="close" ng-click="menu.closeTab(tab)"></md-icon>
                    </span>
                </md-tab-label>
                <md-tab-body>
                    <content-container content="tab.content" ng-class="{fullscreen: tab.fullscreen}" />
                </md-tab-body>
            </md-tab>
        </md-tabs>
        <md-menu class="tab-menu" ng-show="menu.getSelectedTab().type === 'node'">
            <md-button class="md-icon-button" ng-click="menu.openTabMenu($mdOpenMenu, $event)" aria-label="Show Menu">
                <md-icon md-svg-icon="menu"></md-icon>
            </md-button>
            <md-menu-content width="3">
                <md-menu-item>
                    <md-button ng-click="menu.showEmailRecord($event)" ng-disabled="!menu.hasEmail()">
                        <md-icon md-svg-icon="email"></md-icon>
                        Email
                    </md-button>
                </md-menu-item>
                <md-menu-item>
                    <md-button ng-click="menu.showSecureShare($event)">
                        <md-icon md-svg-icon="share"></md-icon>
                        Secure Share</md-button>
                </md-menu-item>
                <md-menu-item>
                    <md-button ng-click="menu.downloadContent()">
                        <md-icon md-svg-icon="download"></md-icon>
                        Download</md-button>
                </md-menu-item>
            </md-menu-content>
        </md-menu>
    </div>
</div>